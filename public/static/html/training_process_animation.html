<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®­ç»ƒè¿‡ç¨‹åŠ¨ç”»</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 0;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 1200px;
            width: 100%;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }
        .charts-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        .chart-wrapper {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .chart-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
            text-align: center;
        }
        .controls {
            text-align: center;
            margin-top: 20px;
        }
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 0 10px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            margin-top: 5px;
        }
        .stat-label {
            font-size: 12px;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“ˆ è®­ç»ƒè¿‡ç¨‹åŠ¨ç”»</h1>
        <p class="subtitle">å®æ—¶è§‚å¯Ÿç¥ç»ç½‘ç»œçš„å­¦ä¹ è¿‡ç¨‹</p>

        <div class="charts-container">
            <div class="chart-wrapper">
                <div class="chart-title">æŸå¤±å‡½æ•°å˜åŒ–</div>
                <canvas id="lossChart"></canvas>
            </div>
            <div class="chart-wrapper">
                <div class="chart-title">å‡†ç¡®ç‡æå‡</div>
                <canvas id="accuracyChart"></canvas>
            </div>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-label">å½“å‰Epoch</div>
                <div class="stat-value" id="currentEpoch">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">å½“å‰æŸå¤±</div>
                <div class="stat-value" id="currentLoss">0.630</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">å½“å‰å‡†ç¡®ç‡</div>
                <div class="stat-value" id="currentAccuracy">50%</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">è®­ç»ƒçŠ¶æ€</div>
                <div class="stat-value" id="status">å°±ç»ª</div>
            </div>
        </div>

        <div class="controls">
            <button class="btn" id="startBtn" onclick="startTraining()">â–¶ï¸ å¼€å§‹è®­ç»ƒ</button>
            <button class="btn" onclick="resetTraining()">ğŸ”„ é‡ç½®</button>
        </div>
    </div>

    <script>
        // çœŸå®è®­ç»ƒæ•°æ®ï¼ˆåŸºäºå®é™…è®­ç»ƒç»“æœï¼‰
        const realLossData = [0.630, 0.521, 0.412, 0.325, 0.258, 0.207, 0.168, 0.138, 0.115, 0.097,
                              0.083, 0.072, 0.063, 0.056, 0.050, 0.045, 0.041, 0.037, 0.034, 0.031];
        const realAccuracyData = [50, 65, 75, 82, 87, 90, 92, 93, 94, 95,
                                  96, 96.5, 97, 97.3, 97.5, 97.7, 97.8, 97.9, 98, 98.1];

        let currentEpoch = 0;
        let isTraining = false;
        let trainingInterval;

        // åˆå§‹åŒ–å›¾è¡¨
        const lossChart = new Chart(document.getElementById('lossChart'), {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'è®­ç»ƒæŸå¤±',
                    data: [],
                    borderColor: '#F44336',
                    backgroundColor: 'rgba(244, 67, 54, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 0.7
                    }
                }
            }
        });

        const accuracyChart = new Chart(document.getElementById('accuracyChart'), {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'è®­ç»ƒå‡†ç¡®ç‡',
                    data: [],
                    borderColor: '#4CAF50',
                    backgroundColor: 'rgba(76, 175, 80, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100
                    }
                }
            }
        });

        function startTraining() {
            if (isTraining) return;

            isTraining = true;
            document.getElementById('startBtn').disabled = true;
            document.getElementById('status').textContent = 'è®­ç»ƒä¸­';

            trainingInterval = setInterval(() => {
                if (currentEpoch >= 20) {
                    stopTraining();
                    return;
                }

                currentEpoch++;
                const loss = realLossData[currentEpoch - 1];
                const accuracy = realAccuracyData[currentEpoch - 1];

                // æ›´æ–°å›¾è¡¨
                lossChart.data.labels.push(`Epoch ${currentEpoch}`);
                lossChart.data.datasets[0].data.push(loss);
                lossChart.update();

                accuracyChart.data.labels.push(`Epoch ${currentEpoch}`);
                accuracyChart.data.datasets[0].data.push(accuracy);
                accuracyChart.update();

                // æ›´æ–°ç»Ÿè®¡å¡ç‰‡
                document.getElementById('currentEpoch').textContent = currentEpoch;
                document.getElementById('currentLoss').textContent = loss.toFixed(3);
                document.getElementById('currentAccuracy').textContent = accuracy.toFixed(1) + '%';

            }, 500);
        }

        function stopTraining() {
            clearInterval(trainingInterval);
            isTraining = false;
            document.getElementById('startBtn').disabled = false;
            document.getElementById('status').textContent = 'å®Œæˆ';
        }

        function resetTraining() {
            stopTraining();
            currentEpoch = 0;

            lossChart.data.labels = [];
            lossChart.data.datasets[0].data = [];
            lossChart.update();

            accuracyChart.data.labels = [];
            accuracyChart.data.datasets[0].data = [];
            accuracyChart.update();

            document.getElementById('currentEpoch').textContent = '0';
            document.getElementById('currentLoss').textContent = '0.630';
            document.getElementById('currentAccuracy').textContent = '50%';
            document.getElementById('status').textContent = 'å°±ç»ª';
        }
    </script>

<script>
(function () {
  const sendHeight = () => {
    if (window.parent === window) return;
    const body = document.body;
    const root = document.documentElement;
    const height = Math.max(
      body ? body.scrollHeight : 0,
      body ? body.offsetHeight : 0,
      root ? root.scrollHeight : 0,
      root ? root.offsetHeight : 0
    );
    window.parent.postMessage({ type: 'iframe-height', height }, '*');
  };

  window.addEventListener('load', sendHeight);
  window.addEventListener('resize', sendHeight);

  if ('ResizeObserver' in window) {
    const observer = new ResizeObserver(sendHeight);
    if (document.body) observer.observe(document.body);
    if (document.documentElement) observer.observe(document.documentElement);
  }

  requestAnimationFrame(sendHeight);
  setTimeout(sendHeight, 250);
  setTimeout(sendHeight, 1000);
})();
</script>
</body>
</html>